# 第15节：DOM操作

### 一、节点分类

* 元素节点
* 属性节点
* 文本节点

上节是获取元素节点和操作属性节点

这节是编辑文本节点和增减元素节点

### 二、文本节点

h1标签已有一段文本，通过点击按钮来继续插入一段文本

```javascript
<h1>内容：</h1>
<button>添加文本</button>
<script>
    var h1 = document.querySelector("h1");// 获取节点
	var btn = document.querySelector("button");// 获取节点
	btn.onclick = function(){  //绑定点击事件
        var text = document.createTextNode("hello world"); // 创建文本节点
        h1.appendChild = (text); // 添加文本节点
    }
```

在DOM中还要个属性可以方便设置和获取文本节点，即**innerHTML**，它就直接表示button按钮中的文本内容， 实现上述功能

```js
<h1>内容：</h1>
<button>添加文本</button>
<script>
    var h1 = document.querySelector("h1");// 获取节点
	var btn = document.querySelector("button");// 获取节点
	btn.onclick = function(){  //绑定点击事件
        var str = h1.innerHTML; //获取原来有的内容
        h1.innerHTML = str + "hello world"; //直接设置innerHTML的值即可完成
```

### 三、创建并且添加元素节点

创建节点用createElement方法；添加元素节点用appendChild方法

完成添加列表功能：

```js
<input type="text">
<button>添加水果</button>
<h1>水果列表</h1>
<ul>
    <li>香蕉</li>
	<li>苹果</li>
	<li>鸭梨</li>
</ul>

<script>
    //先获取节点元素
    var input = document.querySelector("input");
	var btn = document.querySelector("button");
	var ul = document.querySelector("ul");
	//绑定点击事件
	btn.onclick = function(){
        var li = document.createElement("li"); //创建li项目
        ul.appendChild(li); //在ul元素中添加li元素
        li.innerHTML = input.value
    }
```

### 四、删除元素节点

通过removeChild方法删除元素，首先要知道父级元素才能使用此方法删除元素

```js
<button>删除</button>
<div class="box">
    <h1>待删除元素</h1>
</div>
<script>
    //获取节点
    var btn = document.querySelector("button");
	var box = document.querySelector(".box");
	var h1 = document.querySelector("h1");
	//绑定点击事件
	btn.onclick = function(){
        // 若不知道到父级元素，可以使用parentNode方法获得
        //h1.parentNode.removeChild(h1);
        box.removeChild(h1);//这里的box就是h1.parentNode
    }
```

删除水果列表的li项目

```js
<ul>
    <li><span>香蕉</span> <span class="del">删除按钮</span></li>
	<li><span>苹果</span> <span class="del">删除按钮</span></li>
	<li><span>鸭梨</span> <span class="del">删除按钮</span></li>
	<li><span>芒果</span> <span class="del">删除按钮</span></li>
</ul>
<script>
        var aDel = document.querySelectorAll(".del");
		for(var i=0;i<aDel.length; i++){
            aDel[i].onclik = function(){
                var parent = this.parentNode;// this指的是aDel
                parent.parentNode.removeChild(parent);//删除按钮是孙级元素，要删除的是父级元素，因此找到祖先级元素需要两步来寻找，即两次求parentNode。
            }
        }
</script>
```





