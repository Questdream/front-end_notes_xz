# 第04节：node基础

### 一、模块化开发

实际项目开发中，不可能将全部代码写在一个文件中。

node为我们提供了模块化的语法，每一个js文件都是可以当做是一个模块：

* require() 引入一个外部模块
* module.exports 暴露模块接口

举例：在add.js文件中编写一个加法函数，使用module.exports来暴露这个方法，

然后在main.js文件引入这个加法函数。

```js
// add.js定义一个加法函数
...
function add(a,b){
    return a+b;
}
...
module.exports = add; //暴露方法



// main.js引入外部模块的函数
const add = require("./add.js");
let result = add(10,20);
console.log(result);
```

ES2015的模块化语法 与node的模块化语法略有差异，通过

* import 来引入外部模块
* export 来暴露模块接口

在vue课程中，也会使用ES2015模块化语法。

#### 外部模块的引入

主要有三种情况：

* 核心模块：是node自带的模块，可以在require引入和直接使用。
* 自定义模块：是我们自己编写的，引入需要完整的路径(绝对或相对)
* 第三方模块：使用npm下载的模块，也是在require中直接引入使用

### 二、核心模块

#### fs模块

是node的文件系统模块，此模块的readFile方法可以读取文件，比如新建一个readFile.js文件来读取某个文件的内容；比如读取同级目录的hello.txt文件。

```js
const fs = require("fs"); //引入核心模块fs
fs.readFile("hello.txt", (err,data)=>{ //使用readFile方法来查看文件内容
    if(err){
        console.log(err);
    }
    console.log(data.toString());
})
```

在此目录下执行`node readFile.js`可以看到hello.txt文件的内容

fs的readFile方法有两个参数，第一个是读取文件的地址，第二个是回调函数

* 如果文件读取失败，回到函数的第一个参数err会显示错误信息，如果读取文件成功，则err为null。
* data是一个buffer类型，toString方法可以吧buffer类型转换为字符串。

#### path模块

path模块提供了一些用于处理文件路径的方法，比如path的join方法可以连接两个路径。

```js
const path = require("path");
let domain = "http://www.xiaozhoubg.com";
let url = "docs";
let id = "22";

let address = path.join(domain,url,id);//join方法可以有多个参数，把所有参数连接起来
console.log(address)// 地址即为"http://www.xiaozhoubg.com/docs/22"
```

#### http模块

可以创建web服务器，下节讲。