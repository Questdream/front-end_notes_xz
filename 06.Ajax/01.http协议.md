# 第01节：http协议

### 一、概述

全称超文本传输协议，就是一个服务器与客户端通信的协议。

在http协议的约定下，客户端可以向服务器发送请求，服务器在接受到请求后，给予客户端响应。

### 二、http协议请求的常用方法

有四种方法，完成数据的增删改查操作。

* get方法：获取数据
* post方法：提交数据
* put方法：修改数据
* delete方法：删除数据

http请求并不能完成增删改查的基本操作，真正的操作仍然是由服务器完成。

这些操作仅仅是一种约定，例如：我们用get请求配合服务器程序，可以获取数据，同样也可以添加，删除，修改数据，但是为了规范我们的程序，通常只用get方法来查询数据。

### 三、http协议状态码

状态码为客户端提供了一种理解事务处理结果的便捷方式，在network工具中可以看到响应头中的状态码。分为五大类：

* 100-199（信息性状态码）：HTTP/1.1向协议中引入了信息性状态码
* 200-299（成功状态码）：服务器有一组用来表示成功的状态码，对应于不同类型的请求
* 300-399（重定向状态码）：要么告知客户端使用替代位置来访问他们感兴趣的资源，要么就提供一个替代的响应而不是资源的内容
* 400-499（客户端状态码）：有时客户端发送一些服务器无法处理的东西，比如404Not Found错误码。
* 500-599（服务器状态码）：有时客户端发送了一条有效请求，服务器自身却出错了，会返回此类状态码。

三个常用的http状态码：

* 200 OK:请求被正常处理
* 404 Not Found：服务器找不到客户端请求的资源，也可能是服务器不想让你访问而故意返回404
* 500 Interval Server Error：服务器内部错误。

### 四、postman

postman可以模拟浏览器向服务器发送请求，

[postman下载官网]([Download Postman | Try Postman for Free](https://www.postman.com/downloads/))

先完成服务器程序完成数据的增删改查，

```js
const Koa = require("koa");
const router = require("koa-router")();
const parser = require("koa-parser");

const app = new Koa();

app.use(parser());

// 数据
let dataList = ["香蕉","苹果","鸭梨"];

// get 查看
router.get("/fruits", ctx => {
    ctx.body = dataList;
})

//post 添加
router.post("/fruits", ctx => {
    let fruit = ctx.request.body.fruit;//form表单中name属性的fruit值这个input元素的输入框值
    dataList.push(fruit);
    ctx.body = dataList;
})

// put 修改
router.put("/fruits/:id", ctx => {//路由传参 /:id  --> ctx.params.id
    let id = ctx.params.id;//1
    let fruit = ctx.request.body.fruit;//草莓
    dataList.splice(id,1,fruit);//splice(要删除的元素索引值,删除几个元素,将删除元素替换成xx)
    ctx.body = dataList;
})

// delete 删除
router.delete("/fruits/:id", ctx => {
    let id =ctx.params.id;
    dataList.splice(id,1);
    ctx.body = dataList;
})

app.use(router.routes());

app.listen("3000", () => {
    console.log("启动服务器")
})
```

讲解数组的splice方法，可以实现数组元素添加，删除和修改功能。

三个参数，第一个表示要删除元素索引，第二个参数表示删除几个元素，第三个表示替换成什么其他元素

* 添加功能

  `array.splice(0,0,data)`即表示在索引为0处删除0个元素即在这里添加data数据

* 删除功能

  `array.splice(0,1)`即表示在索引为0处删除一个元素

* 修改功能

  `array.splice(0,1,data)`即表示在索引为0处添加一个元素为data

### 五、Chrome调试工具

Chrome浏览器的network工具可以很便捷的查看请求与响应的信息，比如请求列表，请求头信息，响应信息，cookie等。