# 第04节：组件传值

### 一、组件传值的三种情况

我们可以吧组件之间的数据传递分为三种情况：

1. 父级向子级传递数据：使用属性传递
2. 子级向父级传递数据：使用自定义事件传值
3. 非父子级传递数据

### 二、父级向子级传值

父级可以通过属性向子级传递数据，子级通过props属性接受绑定

```js
// 父级组件
<template>
    <div>
    	<child :msg="message"></child>
	</div>
</template>
<script>
// 注册引入子级组件
import Child from "./components/Child.vue";
export default {
    components:{Child},
    data(){
        return {
            message:"hello child"
        }
    }
}
</script>

// 子级组件
<template>
    <h1>{{msg}}</h1>
</template>

<script>
export default {
	props:["msg"]
}
</script>
```

首先在父组件中引入子组件标签，然后在子组件标签中绑定一个属性

然后在子组件中通过props属性中添加前面绑定的属性，

则可以使用父组件中的数据，完成父组件向子组件传值

### 三、子级向父级传值

子级向父级传递数据需要用自定义事件。

```js
// 子级组件
<template>
    <button @click="sendData">sendData</button>
</template>
<script>
    export default{
		data(){
            return{
                message:"hello father"
            }
        },
        methods:{
            sendData(){
                this.$emit("sendData",this.message);//在响应改点击事件的函数中使用$emit来触发一个自定义事件，并传递一个参数。
            }
        }
}


//父级组件
<template>
    <div>
    	<h1>子级的数据是：{{message}}</h1>
		<child @sendData="sd"></child>//在父组件的子组件标签定义自定义事件
	</div>
</tempalte>

<script>
import Child from "./components/Child.vue";
export default {
    components:{Child},
    data(){
        return{
            message:""
        }
    },
    methods: {
        sd(childData){
            this.message=childData;
        }
    }
}
</script>
```

首先在子组件中设置点击事件等，然后在此事件方法中使用$emit来触发一个自定义事件，并传递一个参数给自定义事件。

在父组件中的子组件标签中设置自定义事件，这个自定义事件的方法就是emit触发的自定义事件和其参数，通过这个参数就传递了数据给父组件。完成父组件向子组件传递参数。

### 四、非父子级组件传值

通过公共文件来在非父子级间来传递数据，这里是在src目录中创建一个store.js文件来同一存储数据

```js
//store.js
export default {
    state:{
        message:"hello vue"
    },
    setStateMessage(str){
        this.state.message = str;
    }
}

//sister组件
<template>
    <h1>{{state.message}}</h1>
</template>

<script>
import store from "../store.js"
export default {
    data(){
        return {
            title:"sister组件",
            state:store.state
        }
    }
}
</script>

// brother组件
<tempalte>
    <div>
    	<button @click="changeData">change data</button>
	</div>
</template>

<script>
import store from "../store.js"
export default {
    methods:{
        changeData(){
            store.setStateMessage("122");
            console.log(store.state.message)
        }
    }
}
</script>
```



