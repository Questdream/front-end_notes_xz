# 第07节：插槽，DOM操作，过滤器

### 一、插槽

#### 1.基础插槽

默认情况下，引入组件时，开始标签和结束标签之间不可以添加内容（如果添加也会被忽略）。而现在引入插槽，就可以在其间添加内容绑定到子组件的某个位置。所以插槽可用来扩展组件的自定义能力。

比如创建MyButton的自定义按钮，可以通过插槽来定义内部的文本。

```js
<!-- 子组件MyButton.vue -->
<template>
    <div>
        <button>
            <slot></slot>
		</button>
	</div>
</template>

<!-- 父组件app.vue -->
<template>
    <my-button>测试文本</my-button>
</template>	
```

#### 2.具名插槽

有的时候一个组件会带有多个插槽，可以为slot标签添加name属性来区分不同的插槽

```js
<!-- 子组件layout.vue -->
<template>
    <div>
    	<header>
    		<slot name="header"></slot>
		</headr>
		center content
        <footer>
            <slot name="footer"></slot>
		</footer>
	</div>
</template>
```

引入组件后，在其内部使用template标签和v-slot属性来绑定不同的插槽。

```js
<!-- 父组件app.vue -->
<template>
    <layout>
    	<template v-slot:header>
            this is header
        </template>
		<template v-slot:footer>
            this is footer
        </template>
	</layout>
</template>
```

v-slot可以用#缩写，因此这样也可：

```js
<layout>
    <template #header>
    	this is header
    </template>

	<template #footer>
    	this is footer
    </template>
</layout>
```

很多vue的第三方UI库使用插槽原理实现的

### 二、vue获取真实DOM

VUE主要是通过虚拟DOM实现的页面操作。在项目中偶尔也需要获取真实的DOM节点

在元素中绑定ref属性，然后通过$refs来获取到这个元素。

比如获取某个div的样式

```js
<template>
    <div class="content" ref="box"></div>
</template>

<script>
export default {
	//window.getComputedStyle方法可以获取元素的样式。
	mounted(){
        console.log(window.getComputedStyle(this.$refs.box).height)
    }
}
</script>

<style scoped>
.content{
    border:1px solid red;
    width:100px;
    height:100px;
}
```

### 三、过滤器

其实就是一个函数，来实现对某个参数操作后获得某个结果。

通过在filters属性中定义过滤器函数，通过在双花括号中使用**参数|过滤器**来调用这个过滤器函数。举例将默认时间样式改为其他样式

```js
<template>
    <div>
    	<h1>{{date|dateForma}}</h1>
	</div>
</template>

<script>
export default {
	data(){
        return {
            date:"2021-1-1"
        }
    },
    filters:{
        dateForma(value){
            let dateTime = new Date(value);
            let year = dateTime.getFullYear();
            let month = dateTime.getMonth();
            let date = dateTime.getDate();
            return `${year}年${month+1}月${date}日`
        }
    }
}
```

