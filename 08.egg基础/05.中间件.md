# 第05节：中间件

### 一、概述

中间件的基本概念：egg是一个基于koa的框架，中间件是一个函数，在请求与响应之间执行。

### 二、定义一个中间件

在egg中定义中间件

1. 在app目录下创建middleware目录

2. 在middleware中创建js文件

   ```js
   function checktoken(){
       return async function(ctx,next){
           console.log("middleware checktoken");
           await next();
       }
   }
   module.exports = checktoken;
   ```

在路由文件router.js中添加引入中间件，即router.get()的第二个参数为引入中间件

比如引入app.middleware.checktoken()