# 第05节：前端代码讲解

### 一、导航守卫

导航守卫主要用于实现在页面发生跳转时，检测token的存在，如果token没有，网页则回到登录页面。

```js
router.beforeEach((to,from,next) => {
    let token = localStorage.getItem("token");
    if(to.path === "/login"){
        next();
    }else{
        if(token){
            next()
        }else{
            console.log("未通过token验证")
        }
    }
})
```

### 二、封装请求的方法

比如封装请求方法

```js
import axios from "axios"
const request = axios.create({
    baseURL:"http://127.0.0.1:7001"
})
export default request
```

### 三、登录请求功能

在登录中，我们需要向后台发送数据，并对后台传的数据进行判断，做出各种网页效果。

```js
login(){
    request({
        url:"/login",
        method:"post",
        data:this.data
    }).then(res => {
        if(res.data.code == 50000){
            alert("用户名或密码错误")
        }
        if(res.data.code == 20000){
            localStorage.setItem("token",res.data.token)
            this.$router.push("/class");
        }
    })
    .catch(err => {
        console.log(err);
    })
}
```

### 四、退出登录

在系统中，有退出登录或者注销按钮，点击时，就会自动退出登录状态，并返回到登录页面。

```js
<el-button type="danger" @click="quit">退出登录</el-button>
<script>
    quit(){
    localStorage.removeItem("token");
    this.$router.replace("/");
    console.log("已经删除token")
}
```

